<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cứu Hộ Toàn Quốc - Demo UI</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-sA+e2k8GQGkqS5wFfX6M0s3qQ0kQ4m5h4gq6Q6X0k8A=" crossorigin=""/>

  <style>
    :root{
      --primary:#007BFF;
      --success:#00A36C;
      --danger:#FF4C4C;
      --bg:#F6F8FA;
      --card:#FFFFFF;
      --muted:#6b7280;
      --shadow: 0 6px 18px rgba(31,41,55,0.08);
      font-family: Inter, system-ui, Arial, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
    }

    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:#111827;font-size:15px;line-height:1.4}

    /* Header */
    header{background:linear-gradient(90deg,#0d6efd22, #00a36c11);padding:12px 18px;display:flex;align-items:center;justify-content:space-between;gap:12px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:48px;height:48px;border-radius:10px;background:var(--primary);display:flex;align-items:center;justify-content:center;color:white;font-weight:700;box-shadow:var(--shadow)}
    nav a{margin-left:12px;color:var(--primary);text-decoration:none;font-weight:600}
    .actions{display:flex;gap:8px;align-items:center}

    /* Layout */
    .container{max-width:1200px;margin:18px auto;padding:0 16px}
    .grid{display:grid;gap:16px}
    .cols-3{grid-template-columns:1fr 350px}
    @media (max-width:900px){ .cols-3{grid-template-columns:1fr} .side-card{order:2} }

    /* Hero */
    .hero{background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.8));padding:22px;border-radius:12px;display:flex;gap:18px;align-items:center;box-shadow:var(--shadow)}
    .hero .left{flex:1}
    .hero h1{margin:0 0 8px;font-size:1.5rem}
    .hero p{margin:0;color:var(--muted)}
    .btn{padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--primary);color:white}
    .btn-danger{background:var(--danger);color:white}
    .btn-outline{background:transparent;border:1px solid #e6e9ef;color:var(--primary)}

    /* Cards */
    .card{background:var(--card);padding:12px;border-radius:10px;box-shadow:var(--shadow)}
    .side-card .row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eef2f7}
    .small{font-size:13px;color:var(--muted)}

    /* Map */
    #miniMap{height:200px;border-radius:8px}
    #fullMap{height:420px;border-radius:8px}

    /* Request form (modal-like) */
    .modal{position:fixed;inset:0;background:rgba(2,6,23,0.5);display:flex;align-items:center;justify-content:center;z-index:60;display:none}
    .modal.open{display:flex}
    .modal-content{width:100%;max-width:720px;background:var(--card);padding:18px;border-radius:10px;box-shadow:var(--shadow)}
    .form-row{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:10px}
    .form-row.full{grid-template-columns:1fr}
    input,select,textarea{padding:10px;border-radius:8px;border:1px solid #e6e9ef;width:100%;font-size:14px}
    label{font-weight:600;font-size:13px;margin-bottom:6px;display:block}

    /* Tracking widget */
    .tracking{display:flex;gap:12px;align-items:center}
    .progress{height:10px;border-radius:10px;background:#e6eefc;flex:1;overflow:hidden}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--primary),var(--success));width:30%}

    /* Tabs (simulate multi UI) */
    .tabs{display:flex;gap:8px;margin-bottom:12px}
    .tab{padding:8px 12px;border-radius:8px;background:#fff;border:1px solid #eef2f7;cursor:pointer}
    .tab.active{background:linear-gradient(90deg,var(--primary),var(--success));color:white;border:0}

    /* Dashboard lists */
    .list{max-height:300px;overflow:auto}
    .list .item{padding:10px;border-radius:8px;background:#fbfdff;border:1px solid #eef6ff;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}

    footer{padding:18px;text-align:center;color:var(--muted);font-size:13px;margin-top:24px}
  </style>
</head>
<body>

  <header>
    <div class="brand">
      <div class="logo">CH</div>
      <div>
        <div style="font-weight:800">Cứu Hộ Toàn Quốc</div>
        <div style="font-size:12px;color:var(--muted)">Mạng lưới cứu hộ & trợ giúp 24/7</div>
      </div>
    </div>

    <nav>
      <a href="index.html">Trang chủ</a>
      <a href="index.html#fullMap">Bản đồ</a>
      <a href="tracking.html">Theo dõi</a>
      <a href="index.html#view-team">Đội cứu hộ</a>
      <a href="admin.html">Admin</a>
    </nav>

    <div class="actions">
      <a class="btn btn-outline" href="login.html">Đăng nhập</a>
      <button class="btn btn-primary" id="btn-sos">🆘 Gửi yêu cầu cứu hộ</button>
      <a class="btn btn-primary" href="request.html" style="margin-left:8px">📝 Trang gửi yêu cầu</a>
    </div>
  </header>

  <main class="container">
    <!-- Main grid -->
    <div class="grid cols-3">

      <!-- Left / main content -->
      <section id="view-home" class="card">
        <!-- Hero -->
        <div class="hero">
          <div class="left">
            <h1>Gặp sự cố giữa đường? Một chạm — cứu hộ tới ngay.</h1>
            <p>Hệ thống kết nối người dân với đội cứu hộ gần nhất — hỗ trợ xe máy, ô tô, cứu trợ thiên tai và y tế khẩn cấp.</p>

            <div style="margin-top:12px;display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn btn-danger" id="hero-sos">🆘 Gửi cứu hộ ngay</button>
              <a class="btn btn-danger" href="request.html">📝 Gửi yêu cầu (trang)</a>
              <button class="btn btn-primary" id="hero-track">Theo dõi yêu cầu</button>
              <a class="btn btn-primary" href="tracking.html">📍 Theo dõi (trang)</a>
              <button class="btn btn-outline" id="hero-info">Tra cứu trung tâm</button>
            </div>
          </div>

          <div style="width:360px">
            <div class="card" style="padding:10px">
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div>
                  <div style="font-weight:700">Cứu hộ 24/7</div>
                  <div class="small">Đã hỗ trợ <strong id="stat-count">1,234</strong> ca</div>
                </div>
                <div style="text-align:right">
                  <div class="small">Thời gian phản hồi TB</div>
                  <div style="font-weight:800">28 phút</div>
                </div>
              </div>

              <div style="margin-top:10px">
                <div id="miniMap"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick categories -->
        <div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap">
          <div class="card" style="flex:1;min-width:220px">
            <h3 style="margin:0 0 8px">Chọn loại cứu hộ</h3>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <button class="btn btn-outline">🚗 Cứu hộ ô tô</button>
              <button class="btn btn-outline">🏍️ Cứu hộ xe máy</button>
              <button class="btn btn-outline">🌧️ Cứu trợ thiên tai</button>
              <button class="btn btn-outline">🧑‍⚕️ Cứu hộ y tế</button>
              <button class="btn btn-outline">🐾 Cứu hộ động vật</button>
            </div>
          </div>

          <div class="card" style="min-width:280px">
            <h3 style="margin:0 0 8px">Tra cứu trung tâm cứu hộ</h3>
            <input placeholder="Nhập tỉnh / thành" id="search-region" />
            <div class="small" style="margin-top:8px">Gợi ý: Hà Nội, Hồ Chí Minh, Đà Nẵng...</div>
          </div>
        </div>

        <!-- full map -->
        <div style="margin-top:14px" class="card">
          <h3 style="margin:0 0 8px">Bản đồ cứu hộ toàn quốc</h3>
          <div id="fullMap"></div>
        </div>
      </section>

      <!-- Right / side -->
      <aside class="side-card">
        <div class="card" style="margin-bottom:12px">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <div style="font-weight:800">Yêu cầu gần đây</div>
              <div class="small">Các trường hợp vừa được tiếp nhận</div>
            </div>
            <div style="text-align:right"><div style="font-weight:700;color:var(--primary)">24</div><div class="small">trong 24h</div></div>
          </div>

            <div class="list" style="margin-top:10px">
            <div class="item">
              <div>
                <div style="font-weight:700">Xe máy hết điện</div>
                <div class="small">Hà Nội · 12 phút trước</div>
              </div>
              <div><a class="btn btn-outline" href="tracking.html#REQ-001">Theo dõi</a></div>
            </div>
            <div class="item">
              <div>
                <div style="font-weight:700">Ô tô gặp tai nạn nhẹ</div>
                <div class="small">Nghệ An · 20 phút trước</div>
              </div>
              <div><a class="btn btn-outline" href="tracking.html#REQ-002">Theo dõi</a></div>
            </div>
            <div class="item">
              <div>
                <div style="font-weight:700">Cứu trợ vùng lũ</div>
                <div class="small">Quảng Bình · 1 giờ trước</div>
              </div>
              <div><a class="btn btn-outline" href="tracking.html#REQ-003">Chi tiết</a></div>
            </div>
          </div>
        </div>

        <div class="card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-weight:800">Đội cứu hộ gần bạn</div>
              <div class="small">Sẵn sàng 24/7</div>
            </div>
            <div style="text-align:right"><div style="font-weight:700">12 đội</div><div class="small">trong khu vực</div></div>
          </div>

          <div style="margin-top:12px">
            <div style="display:flex;flex-direction:column;gap:8px">
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div>
                  <div style="font-weight:700">Đội HN-01</div>
                  <div class="small">Hà Nội · 5 phút</div>
                </div>
                <div><button class="btn btn-primary" onclick="assignDemo('HN-01')">Gọi</button></div>
              </div>
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div>
                  <div style="font-weight:700">Đội HCM-05</div>
                  <div class="small">Hồ Chí Minh · 12 phút</div>
                </div>
                <div><button class="btn btn-primary" onclick="assignDemo('HCM-05')">Gọi</button></div>
              </div>
            </div>
          </div>
        </div>

      </aside>

    </div>

    <!-- Tracking / Team / Admin Views (hidden by default) -->
    <section id="view-tracking" class="card" style="margin-top:18px;display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Theo dõi yêu cầu cứu hộ</h3>
        <div class="small">Mã yêu cầu: <strong id="tracking-id">—</strong></div>
      </div>

      <div style="margin-top:12px;display:flex;gap:12px;flex-wrap:wrap">
        <div style="flex:1;min-width:280px">
          <div class="card">
            <h4 style="margin-top:0">Trạng thái</h4>
            <div class="tracking">
              <div style="width:180px">
                <div class="small">Tiến độ</div>
                <div class="progress" style="margin-top:6px"><i id="prog-bar"></i></div>
              </div>
              <div>
                <div style="font-weight:800" id="prog-text">Đang điều phối</div>
                <div class="small">Đội cứu hộ: <span id="prog-team">—</span></div>
              </div>
            </div>

            <div style="margin-top:12px">
              <button class="btn btn-primary" onclick="simulateProgress()">Cập nhật tiến độ (demo)</button>
              <button class="btn btn-outline" onclick="backToHome()">Quay về</button>
            </div>
          </div>
        </div>

        <div style="flex:1;min-width:320px">
          <div class="card">
            <h4 style="margin-top:0">Bản đồ & vị trí</h4>
            <div id="trackMap" style="height:320px;border-radius:8px"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="view-team" class="card" style="margin-top:18px;display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Dashboard Đội Cứu Hộ</h3>
        <div class="small">Tài khoản: <strong>DOI-HN01</strong></div>
      </div>

      <div style="display:grid;grid-template-columns:1fr 320px;gap:12px;margin-top:12px">
        <div class="card">
          <h4>Yêu cầu chờ xử lý</h4>
          <div class="list">
            <div class="item"><div><div style="font-weight:700">REQ-028</div><div class="small">Xe chết máy - Bắc Từ Liêm</div></div><div><button class="btn btn-primary">Nhận</button></div></div>
            <div class="item"><div><div style="font-weight:700">REQ-029</div><div class="small">Lật xe nhẹ - Q. Thanh Xuân</div></div><div><button class="btn btn-primary">Nhận</button></div></div>
          </div>
        </div>

        <div class="card">
          <h4>Trạng thái đội</h4>
          <div style="display:flex;flex-direction:column;gap:10px">
            <div><strong>Trạng thái:</strong> <span id="team-status">Sẵn sàng</span></div>
            <div><strong>Phương tiện:</strong> Xe cẩu, xe cứu hộ, bộ dụng cụ.</div>
            <div><button class="btn btn-outline" onclick="toggleTeamStatus()">Chuyển trạng thái</button></div>
          </div>
        </div>
      </div>
    </section>

    <section id="view-admin" class="card" style="margin-top:18px;display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Admin Dashboard</h3>
        <div class="small">Quản trị hệ thống</div>
      </div>

      <div style="display:grid;grid-template-columns:1fr 320px;gap:12px;margin-top:12px">
        <div class="card">
          <h4>Số liệu</h4>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div style="flex:1;min-width:140px" class="card"><div style="font-weight:800">1,234</div><div class="small">Yêu cầu / tháng</div></div>
            <div style="flex:1;min-width:140px" class="card"><div style="font-weight:800">28 phút</div><div class="small">TB phản hồi</div></div>
            <div style="flex:1;min-width:140px" class="card"><div style="font-weight:800">94%</div><div class="small">Mức hài lòng</div></div>
          </div>

          <h4 style="margin-top:12px">Báo cáo gần đây</h4>
          <div class="list">
            <div class="item"><div><div style="font-weight:700">Báo cáo tuần 42</div><div class="small">Tăng 12% ca cứu trợ</div></div><div><button class="btn btn-outline">Xuất</button></div></div>
            <div class="item"><div><div style="font-weight:700">Sự cố cầu Lạng</div><div class="small">Cần hỗ trợ liên tỉnh</div></div><div><button class="btn btn-outline">Chi tiết</button></div></div>
          </div>
        </div>

        <div class="card">
          <h4>Quản lý</h4>
          <div style="display:flex;flex-direction:column;gap:8px">
            <button class="btn btn-primary">Quản lý tài khoản</button>
            <button class="btn btn-outline">Cấu hình API bản đồ</button>
            <button class="btn btn-outline">Thông báo & cảnh báo</button>
            <button class="btn btn-outline">Xuất báo cáo (Excel / PDF)</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- Modal: Send Request -->
  <div class="modal" id="modal-request" aria-hidden="true">
    <div class="modal-content">
      <h3 style="margin-top:0">Gửi yêu cầu cứu hộ</h3>
      <form id="form-request">
        <div class="form-row full">
          <div>
            <label>Loại cứu hộ</label>
            <select id="req-type">
              <option value="xe-may">Xe máy</option>
              <option value="oto">Ô tô</option>
              <option value="thientai">Thiên tai / Lũ</option>
              <option value="yte">Cứu hộ y tế</option>
              <option value="dongvat">Cứu hộ động vật</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div>
            <label>Số điện thoại liên hệ</label>
            <input id="req-phone" placeholder="Số điện thoại" required />
          </div>
          <div>
            <label>Vị trí (tự động)</label>
            <input id="req-location" placeholder="Kinh độ, Vĩ độ hoặc địa chỉ" />
          </div>
        </div>

        <div class="form-row full">
          <div>
            <label>Mô tả tình huống</label>
            <textarea id="req-desc" rows="4" placeholder="Mô tả ngắn gọn (ví dụ: hết điện, lủng lốp, bị tai nạn...)"></textarea>
          </div>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end">
          <button type="button" class="btn btn-outline" onclick="closeModal()">Hủy</button>
          <button type="submit" class="btn btn-primary">Gửi yêu cầu</button>
        </div>
      </form>
    </div>
  </div>

  <footer>
    © <strong>Cứu Hộ Toàn Quốc</strong> — Demo giao diện. Liên hệ: info@cuuho.toanquoc
  </footer>

  <!-- Leaflet + simple JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-o9N1j8X6VQ2CkXar1gYQmW0k0ZQ5Y1qj6bG6hQkz2yM=" crossorigin=""></script>

  <script>
    // Simple view navigation
    const navLinks = document.querySelectorAll('nav a[data-nav]');
    const views = {
      home: document.getElementById('view-home'),
      tracking: document.getElementById('view-tracking'),
      team: document.getElementById('view-team'),
      admin: document.getElementById('view-admin'),
      map: document.getElementById('view-home') // map in home
    };
    navLinks.forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const key = a.dataset.nav;
        for(const v in views) views[v].style.display = 'none';
        if(views[key]) views[key].style.display = 'block';
        // show home by default if missing
        if(!views[key]) views.home.style.display = 'block';
        window.scrollTo({top:0,behavior:'smooth'});
      });
    });

    // Modal handling
    const modal = document.getElementById('modal-request');
    document.getElementById('btn-sos').addEventListener('click', ()=>openModal());
    document.getElementById('hero-sos').addEventListener('click', ()=>openModal());
    function openModal(){
      modal.classList.add('open');
      // try to get geolocation
      if(navigator.geolocation){
        navigator.geolocation.getCurrentPosition(pos=>{
          const lat = pos.coords.latitude.toFixed(6);
          const lon = pos.coords.longitude.toFixed(6);
          document.getElementById('req-location').value = lat + ',' + lon;
        }, ()=>{/* ignore */});
      }
    }
    function closeModal(){ modal.classList.remove('open'); }
    document.getElementById('form-request').addEventListener('submit', function(e){
      e.preventDefault();
      // simple demo: close modal & show tracking with fake id
      closeModal();
      openTracking('REQ-' + Math.floor(Math.random()*900+100));
    });

    // Simple "tracking" behavior
    function openTracking(id){
      // switch view
      for(const v in views) views[v].style.display = 'none';
      views.tracking.style.display = 'block';
      document.getElementById('tracking-id').innerText = id;
      // reset progress
      document.getElementById('prog-bar').style.width = '20%';
      document.getElementById('prog-text').innerText = 'Đang điều phối';
      document.getElementById('prog-team').innerText = '—';
      // set map marker moving demo
      startTrackingDemo();
    }
    function backToHome(){ for(const v in views) views[v].style.display = 'none'; views.home.style.display = 'block' }

    // Demo progress
    function simulateProgress(){
      const bar = document.getElementById('prog-bar');
      const text = document.getElementById('prog-text');
      const team = document.getElementById('prog-team');
      let w = parseInt(bar.style.width) || 20;
      w += 25;
      if(w >= 100){ w = 100; text.innerText = 'Hoàn thành'; team.innerText = 'HN-01'; }
      else if(w >= 75){ text.innerText = 'Đã đến gần'; team.innerText = 'HN-01'; }
      else if(w >= 50){ text.innerText = 'Đang di chuyển'; team.innerText = 'HN-01'; }
      else { text.innerText = 'Đang điều phối'; team.innerText = '—'; }
      bar.style.width = w + '%';
    }

    // Demo assign
    function assignDemo(teamId){
      alert('Gọi đội ' + teamId + ' (demo).');
    }
    function toggleTeamStatus(){
      const el = document.getElementById('team-status');
      el.innerText = el.innerText === 'Sẵn sàng' ? 'Đang làm nhiệm vụ' : 'Sẵn sàng';
    }

    // Leaflet maps init
    const miniMap = L.map('miniMap', {zoomControl:false, attributionControl:false}).setView([21.0285,105.8542], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(miniMap);
    L.marker([21.0285,105.8542]).addTo(miniMap).bindPopup('Vị trí demo: Hà Nội');

    const fullMap = L.map('fullMap').setView([16,106], 5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:18}).addTo(fullMap);
    // add sample markers for major cities (demo)
    const samplePoints = [
      {pos:[21.0285,105.8542],title:'Hà Nội'},
      {pos:[10.8231,106.6297],title:'Hồ Chí Minh'},
      {pos:[16.0544,108.2022],title:'Đà Nẵng'},
      {pos:[14.0583,108.2772],title:'Quảng Nam'},
    ];
    samplePoints.forEach(p=>L.marker(p.pos).addTo(fullMap).bindPopup(p.title));

    // Track map for tracking view
    const trackMap = L.map('trackMap', {zoomControl:false}).setView([21.0285,105.8542], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19}).addTo(trackMap);
    let trackMarker = L.marker([21.0285,105.8542]).addTo(trackMap).bindPopup('Đội cứu hộ');

    // Demo moving marker
    let moving = false;
    function startTrackingDemo(){
      if(moving) return;
      moving = true;
      let lat = 21.0285, lon = 105.8542;
      let i = 0;
      const path = [
        [21.0285,105.8542],
        [21.0330,105.8600],
        [21.0360,105.8710],
        [21.0400,105.8800]
      ];
      trackMarker.setLatLng(path[0]);
      trackMap.setView(path[0],13);
      const iv = setInterval(()=>{
        i++;
        if(i >= path.length){ clearInterval(iv); moving=false; return; }
        trackMarker.setLatLng(path[i]);
        trackMap.panTo(path[i]);
        // increase prog bar a bit
        const bar = document.getElementById('prog-bar');
        let w = parseInt(bar.style.width) || 20;
        if(w < 90) bar.style.width = (w + 20) + '%';
      }, 2200);
    }

    // Init: show home
    backToHome();

    // small helpers
    document.getElementById('hero-track').addEventListener('click', ()=>openTracking('REQ-DEMO-001'));
    document.getElementById('btn-login').addEventListener('click', ()=>alert('Chức năng đăng nhập demo'));
  </script>
</body>
</html>
