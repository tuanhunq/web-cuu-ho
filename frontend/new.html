<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đội Cứu Hộ - Hệ Thống Cứu Hộ Quốc Gia</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        .rescue-team-card {
            transition: all 0.3s ease;
        }
        .rescue-team-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .specialty-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 500;
            margin-right: 6px;
            margin-bottom: 6px;
        }
        .stats-card {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            padding: 24px;
            border-left: 4px solid #ef4444;
        }
        .region-filter {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 24px;
        }
        .region-btn {
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid #d1d5db;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }
        .region-btn.active {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }
        .team-modal {
            animation: modalFadeIn 0.3s ease-out;
        }
        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        .availability-online {
            color: #10b981;
        }
            .availability-busy {
            color: #f59e0b;
        }
            .availability-offline {
            color: #6b7280;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-20 items-center">
                <div class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                    <span class="text-2xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent">CỨU HỘ QUỐC GIA</span>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="index.html" class="nav-link text-gray-700 hover:text-red-500 font-medium transition">Trang chủ</a>
                    <a href="map.html" class="nav-link text-gray-700 hover:text-red-500 font-medium transition">Bản đồ cứu hộ</a>
                    <a href="request.html" class="nav-link text-gray-700 hover:text-red-500 font-medium transition">Bản tin</a>
                    <a href="post.html#repost" class="nav-link text-gray-700 hover:text-red-500 font-medium transition">Báo tin</a>
                    <a href="rescue-teams.html" class="nav-link text-red-500 font-bold transition">Đội cứu hộ</a>
                </div>
                <div class="md:hidden flex items-center">
                    <button id="menu-toggle" class="text-gray-700 hover:text-red-600" aria-label="Toggle menu">
                        <i data-feather="menu"></i>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white py-2 px-4 shadow-lg">
            <a href="index.html" class="block py-2 text-gray-700 hover:text-red-600 transition">Trang chủ</a>
            <a href="map.html" class="block py-2 text-gray-700 hover:text-red-600 transition">Bản đồ cứu hộ</a>
            <a href="request.html" class="block py-2 text-gray-700 hover:text-red-600 transition">Bản tin</a>
            <a href="post.html#report" class="block py-2 text-gray-700 hover:text-red-600 transition">Báo tin</a>
            <a href="rescue-teams.html" class="block py-2 text-red-600 font-bold transition">Đội cứu hộ</a>
            <a href="login.html" class="block py-2 text-white bg-red-600 rounded-md text-center mt-2">Đăng nhập</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-red-500 to-orange-500 py-16 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Đội Cứu Hộ Quốc Gia</h1>
            <p class="text-xl max-w-3xl mx-auto">Kết nối với các đội cứu hộ chuyên nghiệp trên toàn quốc, sẵn sàng ứng phó 24/7</p>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="bg-red-100 p-3 rounded-lg mr-4">
                            <i data-feather="users" class="w-6 h-6 text-red-500"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-gray-800">245</p>
                            <p class="text-gray-600">Đội cứu hộ</p>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="bg-blue-100 p-3 rounded-lg mr-4">
                            <i data-feather="user-check" class="w-6 h-6 text-blue-500"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-gray-800">5,280</p>
                            <p class="text-gray-600">Nhân viên cứu hộ</p>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="bg-green-100 p-3 rounded-lg mr-4">
                            <i data-feather="check-circle" class="w-6 h-6 text-green-500"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-gray-800">12,450</p>
                            <p class="text-gray-600">Ca cứu hộ thành công</p>
                        </div>
                    </div>
                </div>
                <div class="stats-card">
                    <div class="flex items-center">
                        <div class="bg-purple-100 p-3 rounded-lg mr-4">
                            <i data-feather="map-pin" class="w-6 h-6 text-purple-500"></i>
                        </div>
                        <div>
                            <p class="text-2xl font-bold text-gray-800">63</p>
                            <p class="text-gray-600">Tỉnh thành phủ sóng</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <section class="py-12 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- Filter Section -->
            <div class="bg-white rounded-xl shadow-sm p-6 mb-8">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Tìm Đội Cứu Hộ</h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Khu vực</label>
                        <select id="region-filter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            <option value="all">Tất cả khu vực</option>
                            <option value="mien-bac">Miền Bắc</option>
                            <option value="mien-trung">Miền Trung</option>
                            <option value="tay-nguyen">Tây Nguyên</option>
                            <option value="dong-nam-bo">Đông Nam Bộ</option>
                            <option value="tay-nam-bo">Tây Nam Bộ</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Chuyên môn</label>
                        <select id="specialty-filter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            <option value="all">Tất cả chuyên môn</option>
                            <option value="cuu-ho-chay-no">Cứu hỏa</option>
                            <option value="cuu-ho-duoi-nuoc">Cứu hộ dưới nước</option>
                            <option value="cuu-ho-cao-oc">Cứu hộ cao ốc</option>
                            <option value="cuu-ho-giao-thong">Cứu hộ giao thông</option>
                            <option value="cuu-ho-thien-tai">Cứu hộ thiên tai</option>
                            <option value="cap-cuu-y-te">Cấp cứu y tế</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tình trạng</label>
                        <select id="status-filter" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500">
                            <option value="all">Tất cả tình trạng</option>
                            <option value="online">Đang trực</option>
                            <option value="busy">Đang bận</option>
                            <option value="offline">Không trực</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex flex-wrap gap-4">
                    <button id="search-btn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-medium transition flex items-center">
                        <i data-feather="search" class="w-4 h-4 mr-2"></i> Tìm kiếm
                    </button>
                    <button id="reset-filters" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium transition">
                        Đặt lại
                    </button>
                </div>
            </div>

            <!-- Rescue Teams Grid -->
            <div id="teams-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Team cards will be loaded here -->
            </div>

            <!-- Loading Indicator -->
            <div id="loading-indicator" class="hidden text-center py-12">
                <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-red-500"></div>
                <p class="mt-4 text-gray-600">Đang tải dữ liệu...</p>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden text-center py-12">
                <i data-feather="users" class="w-16 h-16 mx-auto mb-4 text-gray-400"></i>
                <h3 class="text-xl font-medium text-gray-500 mb-2">Không tìm thấy đội cứu hộ</h3>
                <p class="text-gray-400">Không có đội cứu hộ nào phù hợp với tiêu chí tìm kiếm của bạn.</p>
                <button id="reset-empty-filters" class="mt-4 px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600 transition">Đặt lại bộ lọc</button>
            </div>
        </div>
    </section>

    <!-- How to Request Help Section -->
    <section class="py-12 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">Cách Yêu Cầu Hỗ Trợ Cứu Hộ</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-red-500 font-bold text-xl">1</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Tìm Đội Cứu Hộ</h3>
                    <p class="text-gray-600">Tìm kiếm đội cứu hộ gần nhất phù hợp với tình huống của bạn</p>
                </div>
                
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-red-500 font-bold text-xl">2</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Liên Hệ Trực Tiếp</h3>
                    <p class="text-gray-600">Gọi điện hoặc nhắn tin cho đội cứu hộ qua số điện thoại được cung cấp</p>
                </div>
                
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-red-500 font-bold text-xl">3</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Cung Cấp Thông Tin</h3>
                    <p class="text-gray-600">Mô tả chi tiết tình huống và vị trí cần cứu hộ</p>
                </div>
                
                <div class="text-center">
                    <div class="bg-red-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                        <span class="text-red-500 font-bold text-xl">4</span>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Nhận Hỗ Trợ</h3>
                    <p class="text-gray-600">Đội cứu hộ sẽ đến vị trí của bạn trong thời gian sớm nhất</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Team Detail Modal -->
    <div id="team-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 p-4 team-modal">
        <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto p-6">
            <div class="flex justify-between items-center mb-6">
                <h3 id="modal-team-name" class="text-2xl font-bold"></h3>
                <button id="close-modal" class="text-gray-400 hover:text-gray-500 p-2 rounded-full hover:bg-gray-100 transition">
                    <i data-feather="x" class="w-6 h-6"></i>
                </button>
            </div>
            
            <div id="modal-team-content" class="space-y-6">
                <!-- Content will be loaded here -->
            </div>
            
            <div class="mt-8 flex flex-wrap gap-3">
                <button class="call-team flex items-center px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 transition">
                    <i data-feather="phone" class="mr-2 w-4 h-4"></i> Gọi điện
                </button>
                <button class="message-team flex items-center px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition">
                    <i data-feather="message-square" class="mr-2 w-4 h-4"></i> Nhắn tin
                </button>
                <button class="view-on-map flex items-center px-4 py-2 bg-purple-500 text-white rounded-md hover:bg-purple-600 transition">
                    <i data-feather="map" class="mr-2 w-4 h-4"></i> Xem trên bản đồ
                </button>
                <button class="share-team flex items-center px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition">
                    <i data-feather="share-2" class="mr-2 w-4 h-4"></i> Chia sẻ
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
                <div>
                    <div class="flex items-center mb-4">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-red-500 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                        </svg>
                        <span class="text-2xl font-bold bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-transparent">CỨU HỘ QUỐC GIA</span>
                    </div>
                    <p class="text-gray-400 leading-relaxed">Kết nối người dân với lực lượng cứu hộ trong các tình huống khẩn cấp.</p>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Dịch Vụ</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Cứu hỏa</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Cứu hộ giao thông</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Y tế khẩn cấp</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Ứng phó thiên tai</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Liên Kết</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Bộ Công An</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Bộ Y Tế</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Ban Chỉ Đạo PCTT</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Cục Cứu Hộ Cứu Nạn</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-bold mb-4">Hỗ Trợ</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Câu hỏi thường gặp</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Hướng dẫn sử dụng</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Chính sách bảo mật</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition">Điều khoản dịch vụ</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-12 pt-8 text-center text-gray-400">
                <p>© 2023 Hệ Thống Cứu Hộ Quốc Gia. Bản quyền thuộc về Bộ Công An.</p>
            </div>
        </div>
    </footer>

    <script>
        // Sample data for rescue teams
        const rescueTeams = [
            {
                id: 1,
                name: "Đội Cứu Hộ PCCC Số 1 Hà Nội",
                region: "mien-bac",
                location: "Hà Nội",
                specialties: ["cuu-ho-chay-no", "cuu-ho-cao-oc"],
                status: "online",
                phone: "024 3824 4242",
                members: 45,
                established: 2010,
                description: "Đội cứu hỏa chuyên nghiệp với trang thiết bị hiện đại, phục vụ 24/7 tại khu vực Hà Nội.",
                equipment: ["Xe cứu hỏa", "Thang máy", "Bình chữa cháy", "Bộ đồ bảo hộ"],
                responseTime: "5-10 phút",
                rating: 4.8,
                missions: 1245
            },
            {
                id: 2,
                name: "Đội Cứu Hộ Đường Thủy Sài Gòn",
                region: "dong-nam-bo",
                location: "TP.HCM",
                specialties: ["cuu-ho-duoi-nuoc", "cuu-ho-giao-thong"],
                status: "online",
                phone: "028 3829 5151",
                members: 32,
                established: 2015,
                description: "Chuyên cứu hộ đường thủy, tai nạn sông nước tại khu vực TP.HCM và các tỉnh lân cận.",
                equipment: ["Thuyền cứu hộ", "Áo phao", "Máy lặn", "Dây cứu hộ"],
                responseTime: "10-15 phút",
                rating: 4.6,
                missions: 892
            },
            {
                id: 3,
                name: "Đội Cứu Hộ Cao ốc Đà Nẵng",
                region: "mien-trung",
                location: "Đà Nẵng",
                specialties: ["cuu-ho-cao-oc", "cuu-ho-chay-no"],
                status: "busy",
                phone: "0236 3821 2323",
                members: 28,
                established: 2018,
                description: "Chuyên xử lý các tình huống khẩn cấp tại các tòa nhà cao tầng, chung cư.",
                equipment: ["Thang dây", "Dây an toàn", "Bộ đồ bảo hộ", "Thiết bị leo núi"],
                responseTime: "8-12 phút",
                rating: 4.7,
                missions: 567
            },
            {
                id: 4,
                name: "Đội Cứu Hộ Thiên Tài Miền Trung",
                region: "mien-trung",
                location: "Quảng Nam",
                specialties: ["cuu-ho-thien-tai", "cuu-ho-duoi-nuoc"],
                status: "online",
                phone: "0235 3827 3434",
                members: 52,
                established: 2012,
                description: "Đội cứu hộ chuyên ứng phó với thiên tai, lũ lụt tại khu vực Miền Trung.",
                equipment: ["Thuyền cứu hộ", "Máy bơm", "Thiết bị tìm kiếm", "Bộ sơ cứu"],
                responseTime: "15-25 phút",
                rating: 4.9,
                missions: 1342
            },
            {
                id: 5,
                name: "Đội Cấp Cứu Y Tế 115 Hà Nội",
                region: "mien-bac",
                location: "Hà Nội",
                specialties: ["cap-cuu-y-te"],
                status: "online",
                phone: "024 3825 1155",
                members: 38,
                established: 2008,
                description: "Đội cấp cứu y tế chuyên nghiệp, sẵn sàng hỗ trợ 24/7 trong các tình huống y tế khẩn cấp.",
                equipment: ["Xe cấp cứu", "Máy thở", "Bộ sơ cứu", "Máy khử rung tim"],
                responseTime: "5-8 phút",
                rating: 4.8,
                missions: 2156
            },
            {
                id: 6,
                name: "Đội Cứu Hộ Giao Thông Cần Thơ",
                region: "tay-nam-bo",
                location: "Cần Thơ",
                specialties: ["cuu-ho-giao-thong", "cap-cuu-y-te"],
                status: "offline",
                phone: "0292 3823 7878",
                members: 24,
                established: 2019,
                description: "Chuyên xử lý các vụ tai nạn giao thông, cứu hộ và cấp cứu tại hiện trường.",
                equipment: ["Xe cứu hộ", "Máy cắt", "Bộ sơ cứu", "Thiết bị nâng"],
                responseTime: "10-15 phút",
                rating: 4.5,
                missions: 423
            }
        ];

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            feather.replace();
            loadRescueTeams();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Search button
            document.getElementById('search-btn').addEventListener('click', loadRescueTeams);
            
            // Reset filters
            document.getElementById('reset-filters').addEventListener('click', resetFilters);
            document.getElementById('reset-empty-filters').addEventListener('click', resetFilters);
            
            // Close modal
            document.getElementById('close-modal').addEventListener('click', closeModal);
            document.getElementById('team-modal').addEventListener('click', function(e) {
                if (e.target === this) closeModal();
            });
            
            // Mobile menu
            const menuToggle = document.getElementById('menu-toggle');
            const mobileMenu = document.getElementById('mobile-menu');
            
            if (menuToggle && mobileMenu) {
                menuToggle.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                    const icon = menuToggle.querySelector('i');
                    if (mobileMenu.classList.contains('hidden')) {
                        feather.icons.menu.replace();
                    } else {
                        feather.icons.x.replace();
                    }
                });
            }
        }

        function loadRescueTeams() {
            showLoading();
            
            // Get filter values
            const regionFilter = document.getElementById('region-filter').value;
            const specialtyFilter = document.getElementById('specialty-filter').value;
            const statusFilter = document.getElementById('status-filter').value;
            
            // Filter teams
            const filteredTeams = rescueTeams.filter(team => {
                const regionMatch = regionFilter === 'all' || team.region === regionFilter;
                const specialtyMatch = specialtyFilter === 'all' || team.specialties.includes(specialtyFilter);
                const statusMatch = statusFilter === 'all' || team.status === statusFilter;
                
                return regionMatch && specialtyMatch && statusMatch;
            });
            
            // Display teams
            displayTeams(filteredTeams);
            
            // Show empty state if no teams found
            if (filteredTeams.length === 0) {
                document.getElementById('empty-state').classList.remove('hidden');
                document.getElementById('teams-grid').classList.add('hidden');
            } else {
                document.getElementById('empty-state').classList.add('hidden');
                document.getElementById('teams-grid').classList.remove('hidden');
            }
            
            hideLoading();
        }

        function displayTeams(teams) {
            const grid = document.getElementById('teams-grid');
            
            grid.innerHTML = teams.map(team => createTeamCard(team)).join('');
            
            // Add event listeners to team cards
            teams.forEach(team => {
                const card = document.querySelector(`[data-team-id="${team.id}"]`);
                if (card) {
                    card.addEventListener('click', () => openTeamModal(team));
                }
            });
            
            feather.replace();
        }

        function createTeamCard(team) {
            const statusClass = getStatusClass(team.status);
            const statusText = getStatusText(team.status);
            const specialtiesHTML = team.specialties.map(specialty => 
                `<span class="specialty-badge ${getSpecialtyClass(specialty)}">${getSpecialtyText(specialty)}</span>`
            ).join('');
            
            return `
                <div class="rescue-team-card bg-white rounded-xl shadow-md overflow-hidden cursor-pointer" data-team-id="${team.id}">
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold text-gray-800">${team.name}</h3>
                            <span class="${statusClass} flex items-center text-sm">
                                <i data-feather="circle" class="w-3 h-3 mr-1"></i> ${statusText}
                            </span>
                        </div>
                        
                        <div class="mb-4">
                            <div class="flex items-center text-gray-600 mb-2">
                                <i data-feather="map-pin" class="w-4 h-4 mr-2"></i>
                                ${team.location}
                            </div>
                            <div class="flex items-center text-gray-600">
                                <i data-feather="phone" class="w-4 h-4 mr-2"></i>
                                ${team.phone}
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            ${specialtiesHTML}
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-500">
                            <div class="flex items-center">
                                <i data-feather="users" class="w-4 h-4 mr-1"></i>
                                ${team.members} thành viên
                            </div>
                            <div class="flex items-center">
                                <i data-feather="star" class="w-4 h-4 mr-1 text-yellow-500"></i>
                                ${team.rating}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function openTeamModal(team) {
            const modal = document.getElementById('team-modal');
            const title = document.getElementById('modal-team-name');
            const content = document.getElementById('modal-team-content');
            
            title.textContent = team.name;
            content.innerHTML = createTeamModalContent(team);
            
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            
            feather.replace();
            
            // Setup modal buttons
            setupModalButtons(team);
        }

        function createTeamModalContent(team) {
            const statusClass = getStatusClass(team.status);
            const statusText = getStatusText(team.status);
            const specialtiesHTML = team.specialties.map(specialty => 
                `<span class="specialty-badge ${getSpecialtyClass(specialty)}">${getSpecialtyText(specialty)}</span>`
            ).join('');
            
            const equipmentHTML = team.equipment.map(item => 
                `<li class="flex items-center">
                    <i data-feather="check" class="w-4 h-4 text-green-500 mr-2"></i> ${item}
                </li>`
            ).join('');
            
            return `
                <div class="space-y-6">
                    <div class="flex flex-wrap gap-2">
                        <span class="${statusClass} flex items-center px-3 py-1 rounded-full text-sm font-medium">
                            <i data-feather="circle" class="w-3 h-3 mr-1"></i> ${statusText}
                        </span>
                        <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium">
                            <i data-feather="map-pin" class="w-4 h-4 inline mr-1"></i>
                            ${team.location}
                        </span>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Giới thiệu</h4>
                        <p class="text-gray-700">${team.description}</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Thông tin đội</h4>
                            <ul class="space-y-2 text-gray-700">
                                <li class="flex justify-between">
                                    <span>Thành lập:</span>
                                    <span class="font-medium">${team.established}</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Số thành viên:</span>
                                    <span class="font-medium">${team.members} người</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Thời gian phản hồi:</span>
                                    <span class="font-medium">${team.responseTime}</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Ca cứu hộ:</span>
                                    <span class="font-medium">${team.missions} ca</span>
                                </li>
                                <li class="flex justify-between">
                                    <span>Đánh giá:</span>
                                    <span class="font-medium flex items-center">
                                        <i data-feather="star" class="w-4 h-4 text-yellow-500 mr-1"></i> ${team.rating}/5
                                    </span>
                                </li>
                            </ul>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800 mb-2">Trang thiết bị</h4>
                            <ul class="space-y-2">
                                ${equipmentHTML}
                            </ul>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Chuyên môn</h4>
                        <div class="flex flex-wrap gap-2">
                            ${specialtiesHTML}
                        </div>
                    </div>
                </div>
            `;
        }

        function setupModalButtons(team) {
            // Call button
            document.querySelector('.call-team').addEventListener('click', function() {
                window.location.href = `tel:${team.phone}`;
            });
            
            // Message button
            document.querySelector('.message-team').addEventListener('click', function() {
                // In a real app, this would open a messaging interface
                alert(`Gửi tin nhắn đến ${team.phone}`);
            });
            
            // View on map button
            document.querySelector('.view-on-map').addEventListener('click', function() {
                window.location.href = `map.html?team=${team.id}`;
            });
            
            // Share button
            document.querySelector('.share-team').addEventListener('click', function() {
                shareTeam(team);
            });
        }

        function shareTeam(team) {
            const shareText = `${team.name} - ${team.location}\nSố điện thoại: ${team.phone}\nChuyên môn: ${team.specialties.map(s => getSpecialtyText(s)).join(', ')}`;
            
            if (navigator.share) {
                navigator.share({
                    title: team.name,
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Đã sao chép thông tin đội cứu hộ vào clipboard!');
                });
            }
        }

        function resetFilters() {
            document.getElementById('region-filter').value = 'all';
            document.getElementById('specialty-filter').value = 'all';
            document.getElementById('status-filter').value = 'all';
            loadRescueTeams();
        }

        function closeModal() {
            document.getElementById('team-modal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showLoading() {
            document.getElementById('loading-indicator').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loading-indicator').classList.add('hidden');
        }

        // Utility functions
        function getStatusClass(status) {
            const classes = {
                online: 'availability-online',
                busy: 'availability-busy',
                offline: 'availability-offline'
            };
            return classes[status] || classes.offline;
        }

        function getStatusText(status) {
            const texts = {
                online: 'Đang trực',
                busy: 'Đang bận',
                offline: 'Không trực'
            };
            return texts[status] || texts.offline;
        }

        function getSpecialtyClass(specialty) {
            const classes = {
                'cuu-ho-chay-no': 'bg-red-100 text-red-800',
                'cuu-ho-duoi-nuoc': 'bg-blue-100 text-blue-800',
                'cuu-ho-cao-oc': 'bg-purple-100 text-purple-800',
                'cuu-ho-giao-thong': 'bg-yellow-100 text-yellow-800',
                'cuu-ho-thien-tai': 'bg-orange-100 text-orange-800',
                'cap-cuu-y-te': 'bg-green-100 text-green-800'
            };
            return classes[specialty] || 'bg-gray-100 text-gray-800';
        }

        function getSpecialtyText(specialty) {
            const texts = {
                'cuu-ho-chay-no': 'Cứu hỏa',
                'cuu-ho-duoi-nuoc': 'Cứu hộ dưới nước',
                'cuu-ho-cao-oc': 'Cứu hộ cao ốc',
                'cuu-ho-giao-thong': 'Cứu hộ giao thông',
                'cuu-ho-thien-tai': 'Cứu hộ thiên tai',
                'cap-cuu-y-te': 'Cấp cứu y tế'
            };
            return texts[specialty] || 'Khác';
        }
    </script>
</body>
</html>